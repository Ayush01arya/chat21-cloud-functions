
{
    "rules": {
      "apps": {
        "$app_id": {
          "contacts": {
            ".read": "auth != null",
            ".write": "$uid === auth.uid"
          },
          "groups":{
            ".read": false,
            ".write": true
          },
          "presence": {
            ".read": "auth != null",
            ".write": "$uid === auth.uid"
        },
          "users":{
            "$uid":{
                ".read": "$uid === auth.uid",
                ".write": "$uid === auth.uid",
                "messages" : {
                  "$message_id":{
                      ".validate": "(!newData.hasChildren(['status']) || ( newData.hasChildren(['status']) && newData.child('status').isNumber() && newData.child('status').val()==200) )"
                  }
                }
            }
          }
        }	
      }
    }
  }