
{
    "rules": {
      "apps": {
        "$app_id": {
          "contacts": {
            ".read": true,
                ".write": true,
          },
          "groups":{
            ".read": true,
                ".write": true,
          },
          "presence": {
            ".read": true,
                ".write": true,
          },
          "users":{
            "$uid":{
            //".read": true,
                //".write": true,
                 ".read": "$uid === auth.uid",
                  ".write": "$uid === auth.uid",
                "messages" : {
                  "$message_id":{
                      ".validate": "(!newData.hasChildren(['status']) || ( newData.hasChildren(['status']) && newData.child('status').isNumber() && newData.child('status').val()==200) )"
                  }
                }
            }
          }
        }	
      }
    }
  }